(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64cae23c"],{1:function(t,e){},2:function(t,e){},3:function(t,e){},3288:function(t,e,n){"use strict";n("5dbb")},"333d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[n("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total,small:""},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},a=[];n("a9e3");Math.easeInOutQuad=function(t,e,n,i){return t/=i/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,n){var i=r(),a=t-i,l=20,c=0;e="undefined"===typeof e?500:e;var u=function(){c+=l;var t=Math.easeInOutQuad(c,i,a,e);s(t),c<e?o(u):n&&"function"===typeof n&&n()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50,100,150]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&l(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(n("6291"),n("2877")),p=Object(d["a"])(u,i,a,!1,null,"499152c2",null);e["a"]=p.exports},"5dbb":function(t,e,n){},6291:function(t,e,n){"use strict";n("e0a3")},8151:function(t,e,n){"use strict";n("c986")},b809:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}));var i=n("b775");function a(t){return Object(i["a"])({url:"/log/list",params:t})}function o(){return Object(i["a"])({url:"/log/alarmStatistics",method:"get"})}var s={type:{0:{label:"普通",value:0,color:"#67c23a"},1:{label:"警告",value:1,color:"#fe8d00"},2:{label:"危险",value:2,color:"#FE4C00"},3:{label:"报警",value:3,color:"#ff0000"},4:{label:"入库",value:4,color:"#3dbb5a"},5:{label:"出库",value:5,color:"#2a8bbe"}}}},bd113:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"inventory-box"},[t._m(0),n("Inventory",{ref:"inventory"})],1),n("div",{staticClass:"operation-box"},[n("div",{staticClass:"input-box"},[n("div",{staticClass:"input-form"},[n("el-form",{ref:"warehousingList",attrs:{"label-position":t.labelPosition,"label-width":"150px",model:t.warehousingList,rules:t.warehousingListRules}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"物料编码：",prop:"goodsCode"}},[n("el-input",{attrs:{clearable:""},model:{value:t.warehousingList.goodsCode,callback:function(e){t.$set(t.warehousingList,"goodsCode",e)},expression:"warehousingList.goodsCode"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"库存编码："}},[n("el-input",{attrs:{clearable:"",placeholder:"手动编辑/自动生成"},model:{value:t.warehousingList.inventoryCode,callback:function(e){t.$set(t.warehousingList,"inventoryCode",e)},expression:"warehousingList.inventoryCode"}})],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:18}},[n("el-form-item",{attrs:{label:"库位编码："}},[n("el-input",{attrs:{disabled:"",clearable:"",placeholder:"自动生成"},model:{value:t.warehousingList.storageCode,callback:function(e){t.$set(t.warehousingList,"storageCode",e)},expression:"warehousingList.storageCode"}})],1)],1)],1)],1)],1),n("div",{staticClass:"input-buttons"},[n("el-button",{staticClass:"input-button-operation",attrs:{type:"primary",icon:"el-icon-caret-left"},on:{click:t.manualWarehousing}},[t._v(" 手动入库 ")]),n("el-button",{staticClass:"input-button-operation",attrs:{type:"primary",icon:"el-icon-full-screen"},on:{click:t.QR_Warehousing}},[t._v(" 扫码入库 ")]),n("el-button",{staticClass:"input-button-operation",attrs:{type:"primary",icon:"el-icon-caret-right"},on:{click:t.outWarehousing}},[t._v(" 手动出库 ")])],1)]),n("div",{staticClass:"button-box"},[n("div",{staticClass:"buttons1"},[n("el-button",{staticClass:"button1",attrs:{icon:"el-icon-sort",type:"primary"},on:{click:t.intelligentDiskLibrary}},[t._v("智能盘库 ")]),n("el-button",{staticClass:"button1",attrs:{icon:"el-icon-s-operation",type:"info"},on:{click:t.storageMessage}},[t._v("库位信息 ")]),n("el-button",{staticClass:"button1",attrs:{icon:"el-icon-s-operation",type:"info"},on:{click:t.openInventoryMessage}},[t._v("库存信息 ")]),n("el-button",{staticClass:"button1",attrs:{icon:"el-icon-notebook-2",type:"info"},on:{click:t.openTaskMessage}},[t._v("任务信息 ")])],1),n("div",{staticClass:"logTable"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.logTableLoading,expression:"logTableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.operationLogList,stripe:"",height:"100%","header-cell-style":{"text-align":"center"},"cell-style":{"text-align":"center"}}},[n("el-table-column",{attrs:{type:"index",width:"40%"}}),n("el-table-column",{attrs:{prop:"message",label:"任务日志"}}),n("el-table-column",{attrs:{prop:"result",label:"结果"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("el-tag",{attrs:{type:t.typeTag(i.type)}},[t._v(" "+t._s(i.result)+" ")])]}}])})],1)],1)])]),n("el-dialog",{attrs:{title:"库位信息",visible:t.storageMessageVisible,width:"80%"},on:{"update:visible":function(e){t.storageMessageVisible=e}}},[n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px",display:"flex","flex-direction":"column"},attrs:{data:t.storageData,"row-key":"id",border:"","default-expand-all":""}},[n("el-table-column",{attrs:{prop:"code",label:"库位编码",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:"",placeholder:"库位编码"},model:{value:e.row.code,callback:function(n){t.$set(e.row,"code",n)},expression:"scope.row.code"}})]}}])}),n("el-table-column",{attrs:{label:"水平位置",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:"库位名称"},model:{value:e.row.row,callback:function(n){t.$set(e.row,"row",n)},expression:"scope.row.row"}})]}}])}),n("el-table-column",{attrs:{label:"库位名称",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:"库位名称"},model:{value:e.row.name,callback:function(n){t.$set(e.row,"name",n)},expression:"scope.row.name"}})]}}])}),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:""}}),n("el-table-column",{attrs:{label:"是否禁用",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"可用","inactive-text":"禁止"},model:{value:e.row.forbidden,callback:function(n){t.$set(e.row,"forbidden",n)},expression:"scope.row.forbidden"}})]}}])}),n("el-table-column",{attrs:{label:"备注",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:"备注"},model:{value:e.row.remark,callback:function(n){t.$set(e.row,"remark",n)},expression:"scope.row.remark"}})]}}])})],1),n("div",{staticClass:"updateStorageButtonBox"},[n("el-button",{staticClass:"updateStorageButton",attrs:{type:"warning"},on:{click:t.updateStorage}},[t._v("修改")]),n("el-button",{staticClass:"updateStorageButton",attrs:{type:"info"},on:{click:function(e){t.storageMessageVisible=!1}}},[t._v("取消")])],1)],1),n("el-dialog",{attrs:{title:"库存信息",visible:t.inventoryMessageVisible,width:"80%"},on:{"update:visible":function(e){t.inventoryMessageVisible=e}}},t._l(this.inventoryListData,(function(e,i){return n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-descriptions",{attrs:{title:e.storageName}},[n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-caret-top"}),t._v(" 位置总数 ")]),t._v(" "+t._s(e.inventoryNum)+" ")],2),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-caret-right"}),t._v(" 位置余额 ")]),t._v(" "+t._s(e.inventoryResidue)+" ")],2),n("el-descriptions-item",[n("template",{slot:"label"},[n("i",{staticClass:"el-icon-caret-left"}),t._v(" 已用数量 ")]),t._v(" "+t._s(e.inventoryUsed)+" ")],2)],1)],1)],1)})),1)],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"color-tips"},[n("div",{staticClass:"tips-div"},[n("div",{staticClass:"tips-c-empty"}),n("div",{staticClass:"tips-c-blank"}),n("div",{staticClass:"tips-t"},[t._v("无货物")])]),n("div",{staticClass:"tips-div"},[n("div",{staticClass:"tips-c-have"}),n("div",{staticClass:"tips-c-blank"}),n("div",{staticClass:"tips-t"},[t._v("有货物")])]),n("div",{staticClass:"tips-div"},[n("div",{staticClass:"tips-c-in"}),n("div",{staticClass:"tips-c-blank"}),n("div",{staticClass:"tips-t"},[t._v("正在入库")])]),n("div",{staticClass:"tips-div"},[n("div",{staticClass:"tips-c-out"}),n("div",{staticClass:"tips-c-blank"}),n("div",{staticClass:"tips-t"},[t._v("正在出库")])])])}],o=n("c7eb"),s=n("1da1"),r=n("5530"),l=(n("d81d"),n("b64b"),n("a573"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.inventoryLoading,expression:"inventoryLoading"}],staticClass:"inventory-container"},t._l(this.crosswise,(function(e,i){return n("div",{ref:"rowBox",refInFor:!0,staticClass:"box"},t._l(e.inventoryList,(function(e,a){return n("el-tooltip",{key:a,ref:"tooltip",refInFor:!0,staticClass:"item",attrs:{effect:"light",content:t.content,placement:"top-start"}},[n("div",{ref:"layerBox",refInFor:!0,staticClass:"inventory",class:{highlighted:e.isSelected},style:{backgroundColor:t.getStatusColor(e.status)},on:{mouseenter:function(n){return t.showTooltip(e)},click:function(n){return t.selectItem(i,a,e)}}})])})),1)})),0)}),c=[],u=(n("4de4"),n("b0c0"),n("d3b7"),n("0643"),n("2382"),n("4e3e"),n("159b"),n("b775"));function d(t){return Object(u["a"])({url:"/storage/list",method:"get",params:t})}function p(){return Object(u["a"])({url:"/storage/queryStorageAndInventory",method:"get"})}function g(){return Object(u["a"])({url:"/storage/queryInventoryNum",method:"get"})}function b(t){return Object(u["a"])({url:"/storage/saveOrUpdate",method:"post",data:t})}var f=n("2f62"),h=n("d6d0"),v={data:function(){return{query:{page:1,limit:10},inventoryLoading:!1,crosswise:[],boxWidth:"",inventoryQuery:{page:1,limit:50,storageId:0},maxWidth:0,maxHeight:0,selectIndex:null,selectLayer:[],content:"123"}},methods:Object(r["a"])(Object(r["a"])({getList:function(){var t=this;this.selectLayer=[],p().then((function(e){200===e.code&&(t.maxWidth=e.data.length,t.crosswise=e.data.map((function(e){return e.inventoryList.length>0&&e.inventoryList.forEach((function(e){t.$set(e,"isSelected",!1)})),e})),e.data.forEach((function(e){e.hasOwnProperty("inventoryList")||(e.inventoryList=[]),e.inventoryList.length>t.maxHeight&&(t.maxHeight=e.inventoryList.length)})),t.resetSize())}))},resetSize:function(){var t=this;this.$nextTick((function(){t.$refs.rowBox.forEach((function(e){e.style.width=100/t.maxWidth-3+"%"})),t.$refs.layerBox.forEach((function(e){e.style.height=100/t.maxHeight-5+"%"}))}))},selectItem:function(t,e,n){var i=this.crosswise[t].inventoryList[e];this.$set(i,"isSelected",!i.isSelected),i.isSelected?this.selectLayer.push(n):this.selectLayer=this.selectLayer.filter((function(t){return t.id!==n.id}))},getStatusColor:function(t){switch(t){case 0:return"var(--colorEmpty)";case 1:return"var(--colorIn)";case 2:return"#4682b4";case 3:return"#aba33b";case 4:return"#475247";case 5:return"#757575";default:return"#cccccc"}}},Object(f["b"])("webSocket",["openSocket"])),{},{intelligentDiskLibrary:function(){var t=this;this.inventoryLoading=!0,this.getList(),setTimeout((function(){t.inventoryLoading=!1}),2e3)},showTooltip:function(t){t.goods?this.content=t.goods.name+"-"+t.goods.code:this.content="库存编码-"+t.code},outWarehousing:function(){if(this.selectLayer.length<=0)this.$message.info("请选择需要出库的库存位置！");else{for(var t=[],e=0;e<this.selectLayer.length;e++){if(this.selectLayer[e].goodsId<=0)return void this.$message.info(this.selectLayer[e].name+"-"+this.selectLayer[e].layer+"不存在物料，无法出库！");var n={type:1,goodsId:this.selectLayer[e].goodsId,inventoryCode:this.selectLayer[e].code};t.push(n)}Object(h["d"])(t).then((function(t){}))}}}),created:function(){this.getList()},computed:Object(r["a"])(Object(r["a"])({},Object(f["c"])(["sidebar","username"])),Object(f["d"])("webSocket",["socketData"])),watch:{socketData:function(t){"operation"===t.type&&this.getList()}},mounted:function(){var t=this;this.$on("intelligentDiskLibrary",(function(){t.intelligentDiskLibrary()})),this.$on("outWarehousing",(function(){t.outWarehousing()}))}},m=v,y=(n("8151"),n("2877")),w=Object(y["a"])(m,l,c,!1,null,"6cc3975d",null),L=w.exports,k=n("333d"),C=n("b809"),O={data:function(){return{warehousingList:{type:0,goodsCode:"24122701",inventoryCode:"",storageCode:""},warehousingListRules:{goodsCode:[{required:!1,message:"请输入物料编码！！！",trigger:"change"}]},labelPosition:"left",storageMessageVisible:!1,inventoryMessageVisible:!1,taskMessageVisible:!0,storageData:[],query:{page:1,limit:20},taskQuery:{page:1,limit:10,operationType:4},taskTotal:10,inventoryListData:[],operationLogList:[],logTableLoading:!1}},methods:Object(r["a"])(Object(r["a"])({QR_Warehousing:function(){this.$notify({title:"失败",message:"暂不支持扫码枪入库功能，请及时联系管理员！！！",type:"error"})},manualWarehousing:function(){var t=[];t.push(this.warehousingList),this.$refs.warehousingList.validate((function(e){if(!e)return!1;Object(h["d"])(t).then((function(t){}))}))},intelligentDiskLibrary:function(){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["b"])().then((function(e){200===e.code&&t.$refs.inventory.$emit("intelligentDiskLibrary")}));case 2:case"end":return e.stop()}}),e)})))()},outWarehousing:function(){this.$refs.inventory.$emit("outWarehousing")},storageMessage:function(){this.getStorageList(),this.storageMessageVisible=!0},getStorageList:function(){var t=this;d(this.query).then((function(e){200===e.code&&(t.storageData=e.data.list)}))},updateStorage:function(){var t=this;console.log(this.storageData),b(this.storageData).then((function(e){200===e.code&&(t.storageMessageVisible=!1,t.$message.success(e.message))}))},openInventoryMessage:function(){var t=this;g().then((function(e){200===e.code&&(t.inventoryListData=e.data,t.inventoryMessageVisible=!0)}))},openTaskMessage:function(){this.$router.push({path:"/task"})},getOperationLog:function(){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(C["c"])(t.taskQuery).then((function(e){t.logTableLoading=!0,200===e.code&&(t.operationLogList=e.data.list),setTimeout((function(){t.logTableLoading=!1}),500)}));case 2:case"end":return e.stop()}}),e)})))()}},Object(f["b"])("webSocket",["openSocket"])),{},{typeTag:function(t){return 0===t||4===t?"success":1===t||5===t||2===t?"warning":3===t?"danger":void 0}}),components:{Inventory:L,pagination:k["a"]},created:function(){this.getOperationLog()},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(f["c"])(["sidebar","username"])),Object(f["d"])("webSocket",["socketData"])),{},{typeOptions:function(){return Object.keys(C["a"].type).map((function(t){return C["a"].type[t]}))}}),watch:{socketData:function(t){"operation"===t.type&&this.getOperationLog(),"log"===t.type&&this.getOperationLog()}}},x=O,S=(n("3288"),Object(y["a"])(x,i,a,!1,null,"56e36afb",null));e["default"]=S.exports},c986:function(t,e,n){},d6d0:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return r}));var i=n("b775");n("ba0f");function a(t){return Object(i["a"])({url:"/inventory/warehousing",method:"post",data:t})}function o(){return Object(i["a"])({url:"/inventory/intelligentDiskLibrary",method:"get"})}function s(){return Object(i["a"])({url:"/inventory/billOfInventory",method:"get"})}function r(){return Object(i["a"])({url:"/inventory/inventoryBalance",method:"get"})}},e0a3:function(t,e,n){}}]);